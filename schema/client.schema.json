{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "HackerNews.HN Client Entry",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "id",
    "name",
    "description",
    "platforms",
    "client_type",
    "price",
    "status",
    "homepage_url",
    "last_checked"
  ],
  "properties": {
    "id": {
      "type": "string",
      "pattern": "^[a-z0-9][a-z0-9-]{2,64}$",
      "description": "Stable slug for URLs and lookups."
    },
    "name": { "type": "string", "minLength": 2, "maxLength": 80 },
    "tagline": { "type": "string", "maxLength": 140 },
    "description": { "type": "string", "minLength": 20, "maxLength": 1200 },
    "platforms": {
      "type": "array",
      "minItems": 1,
      "uniqueItems": true,
      "items": {
        "type": "string",
        "enum": [
          "web",
          "ios",
          "android",
          "macos",
          "windows",
          "linux",
          "terminal",
          "extension"
        ]
      }
    },
    "client_type": {
      "type": "string",
      "enum": ["web", "mobile", "desktop", "terminal", "extension"]
    },
    "price": { "type": "string", "enum": ["free", "paid", "freemium"] },
    "license": { "type": "string", "maxLength": 80 },
    "open_source": { "type": "boolean", "default": false },
    "repo_url": { "type": "string", "format": "uri" },
    "homepage_url": { "type": "string", "format": "uri" },
    "store_urls": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["label", "url"],
        "properties": {
          "label": { "type": "string", "maxLength": 40 },
          "url": { "type": "string", "format": "uri" }
        }
      }
    },
    "hn_discussion_url": { "type": "string", "format": "uri" },
    "tags": {
      "type": "array",
      "uniqueItems": true,
      "items": { "type": "string", "pattern": "^[a-z0-9][a-z0-9-]{0,30}$" }
    },
    "status": { "type": "string", "enum": ["active", "inactive", "discontinued"] },
    "last_checked": { "type": "string", "format": "date" },
    "last_release": { "type": "string", "format": "date" },
    "screenshots": {
      "type": "array",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["url"],
        "properties": {
          "url": { "type": "string", "format": "uri" },
          "alt": { "type": "string", "maxLength": 160 }
        }
      }
    },
    "notes": { "type": "string", "maxLength": 400 }
  },
  "allOf": [
    {
      "if": { "properties": { "open_source": { "const": true } } },
      "then": { "required": ["repo_url"] }
    }
  ]
}
